---
layout: post
title:  "Benchmark of hopscotch_map"
date:   2016-08-29 11:00:00 +0100
comments: true
---

<script language="javascript" type="text/javascript" src="{{ site.url }}/js/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="{{ site.url }}/js/jquery.flot.min.js"></script>
<script>
    $("<div id='tooltip'></div>").css({
                                    position: "absolute",
                                    display: "none",
                                    border: "1px solid #fdd",
                                    padding: "2px",
                                    "background-color": "#fee",
                                    opacity: 0.80
                                  }).appendTo("body");
                
    series_settings = {
        lines: { show: true },
        points: { show: true }
    };

    grid_settings = { tickColor: '#ddd', hoverable: true };

    xaxis_settings = {
        tickFormatter: function(num, obj) { return parseInt(num/1000000) + 'M'; }
    };

    yaxis_runtime_settings = {
        tickFormatter: function(num, obj) { return (+num.toFixed(2)) + ' sec.'; }
    };

    yaxis_memory_settings = {
        tickFormatter: function(num, obj) { return parseInt(num/1024/1024) + 'MiB'; }
    };

    legend_settings = {
        position: 'nw',
        backgroundOpacity: 0
    };

    runtime_settings = {
        series: series_settings,
        grid: grid_settings,
        xaxis: xaxis_settings,
        yaxis: yaxis_runtime_settings,
        legend: legend_settings
    };

    memory_settings = {
        series: series_settings,
        grid: grid_settings,
        xaxis: xaxis_settings,
        yaxis: yaxis_memory_settings,
        legend: legend_settings
    };

    chart_data = {"delete-runtime": [{"data": [[2000000, 0.044812], [4000000, 0.089601], [6000000, 0.134387], [8000000, 0.179133], [10000000, 0.224065], [12000000, 0.268919], [14000000, 0.313621], [16000000, 0.358284], [18000000, 0.403293], [20000000, 0.44787], [22000000, 0.492661], [24000000, 0.537745], [26000000, 0.582381], [28000000, 0.627209], [30000000, 0.672551], [32000000, 0.716786], [34000000, 0.761596], [36000000, 0.806987], [38000000, 0.851215], [40000000, 0.896341]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 0.009286], [4000000, 0.018564], [6000000, 0.02787], [8000000, 0.037126], [10000000, 0.046409], [12000000, 0.055745], [14000000, 0.06501], [16000000, 0.074262], [18000000, 0.083594], [20000000, 0.092766], [22000000, 0.102132], [24000000, 0.111438], [26000000, 0.12072], [28000000, 0.130019], [30000000, 0.139224], [32000000, 0.148711], [34000000, 0.15785], [36000000, 0.167038], [38000000, 0.176342], [40000000, 0.185671]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 0.059282], [4000000, 0.118775], [6000000, 0.188798], [8000000, 0.238623], [10000000, 0.329438], [12000000, 0.379026], [14000000, 0.428663], [16000000, 0.477952], [18000000, 0.612292], [20000000, 0.661857], [22000000, 0.711459], [24000000, 0.762358], [26000000, 0.810463], [28000000, 0.860042], [30000000, 0.909622], [32000000, 0.959601], [34000000, 1.009352], [36000000, 1.060729], [38000000, 1.279595], [40000000, 1.329556]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 0.070709], [4000000, 0.141204], [6000000, 0.211951], [8000000, 0.282327], [10000000, 0.353257], [12000000, 0.424799], [14000000, 0.49468], [16000000, 0.565486], [18000000, 0.635956], [20000000, 0.70672], [22000000, 0.777373], [24000000, 0.848203], [26000000, 0.918422], [28000000, 0.988733], [30000000, 1.060069], [32000000, 1.129931], [34000000, 1.201462], [36000000, 1.271805], [38000000, 1.34341], [40000000, 1.414093]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.069044], [4000000, 0.137896], [6000000, 0.212604], [8000000, 0.275086], [10000000, 0.360508], [12000000, 0.424877], [14000000, 0.488408], [16000000, 0.550308], [18000000, 0.658318], [20000000, 0.721076], [22000000, 0.783558], [24000000, 0.847237], [26000000, 0.910072], [28000000, 0.973403], [30000000, 1.037393], [32000000, 1.100131], [34000000, 1.249198], [36000000, 1.311301], [38000000, 1.37644], [40000000, 1.439402]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 0.017818], [4000000, 0.03558], [6000000, 0.056618], [8000000, 0.071079], [10000000, 0.098437], [12000000, 0.113151], [14000000, 0.1276], [16000000, 0.142078], [18000000, 0.181772], [20000000, 0.196266], [22000000, 0.210961], [24000000, 0.22557], [26000000, 0.240303], [28000000, 0.254923], [30000000, 0.269613], [32000000, 0.284379], [34000000, 0.348724], [36000000, 0.363333], [38000000, 0.377776], [40000000, 0.392418]], "label": "Hopscotch_map 0.1.0 with H=62"}], "deletestring-runtime": [{"data": [[2000000, 2.038452], [4000000, 4.411791], [6000000, 4.506858], [8000000, 5.577255], [10000000, 6.839177], [12000000, 8.448398], [14000000, 10.273168], [16000000, 11.036889], [18000000, 12.646913], [20000000, 14.128953], [22000000, 15.736244], [24000000, 17.328766]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 1.907667], [4000000, 3.588209], [6000000, 3.483616], [8000000, 4.60515], [10000000, 5.754305], [12000000, 6.944262], [14000000, 8.639792], [16000000, 8.920178], [18000000, 10.581108], [20000000, 11.714108], [22000000, 12.876946], [24000000, 14.03119]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 2.357705], [4000000, 4.696026], [6000000, 6.712756], [8000000, 5.543615], [10000000, 6.849886], [12000000, 8.013122], [14000000, 9.71886], [16000000, 10.959514], [18000000, 11.99462], [20000000, 13.516391], [22000000, 14.922541], [24000000, 16.396823]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 2.196735], [4000000, 4.694044], [6000000, 6.216397], [8000000, 5.42412], [10000000, 6.517206], [12000000, 7.925205], [14000000, 9.633485], [16000000, 10.791782], [18000000, 11.834615], [20000000, 13.220194], [22000000, 14.676206], [24000000, 16.193302]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 1.856069], [4000000, 3.716835], [6000000, 3.504666], [8000000, 4.680543], [10000000, 5.768138], [12000000, 7.288152], [14000000, 9.77837], [16000000, 9.172188], [18000000, 10.466573], [20000000, 11.598323], [22000000, 12.789169], [24000000, 13.934607]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 2.551657], [4000000, 5.112932], [6000000, 4.974799], [8000000, 6.260837], [10000000, 7.177451], [12000000, 8.382433], [14000000, 10.012529], [16000000, 12.744345], [18000000, 13.923433], [20000000, 15.197237], [22000000, 16.360984], [24000000, 17.718436]], "label": "Hopscotch_map 0.1.0 with H=62"}], "random-runtime": [{"data": [[2000000, 1.112239], [4000000, 2.492822], [6000000, 14.973254], [8000000, 5.4486], [10000000, 45.020295], [12000000, 41.473514], [14000000, 11.510685], [16000000, 11.933359], [18000000, 66.750278], [20000000, 129.71657], [22000000, 150.985068], [24000000, 124.600756], [26000000, 59.660802], [28000000, 24.57548], [30000000, 24.530234], [32000000, 25.429531], [34000000, 43.332188], [36000000, 223.830863], [38000000, 388.525252], [40000000, 487.133269]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 0.171214], [4000000, 0.353155], [6000000, 0.601415], [8000000, 0.731474], [10000000, 1.094069], [12000000, 1.230784], [14000000, 1.362648], [16000000, 1.49844], [18000000, 2.073049], [20000000, 2.216324], [22000000, 2.357758], [24000000, 2.506524], [26000000, 2.638804], [28000000, 2.75275], [30000000, 2.886023], [32000000, 3.054689], [34000000, 3.98833], [36000000, 4.186309], [38000000, 4.313925], [40000000, 4.474284]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 0.468455], [4000000, 1.03904], [6000000, 1.875315], [8000000, 2.244048], [10000000, 3.44488], [12000000, 3.98561], [14000000, 4.414707], [16000000, 4.772511], [18000000, 6.330386], [20000000, 7.224634], [22000000, 7.853087], [24000000, 8.381602], [26000000, 8.806268], [28000000, 9.296423], [30000000, 9.628334], [32000000, 9.969927], [34000000, 10.276049], [36000000, 10.578746], [38000000, 14.168492], [40000000, 15.081461]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 0.690954], [4000000, 1.48124], [6000000, 1.909464], [8000000, 3.123002], [10000000, 3.621042], [12000000, 4.013016], [14000000, 5.854889], [16000000, 6.573482], [18000000, 7.124023], [20000000, 7.64636], [22000000, 7.9989], [24000000, 8.354834], [26000000, 11.208724], [28000000, 12.28309], [30000000, 13.136925], [32000000, 13.850023], [34000000, 14.473017], [36000000, 15.017078], [38000000, 15.596395], [40000000, 15.994993]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.437289], [4000000, 0.959183], [6000000, 1.754559], [8000000, 2.050687], [10000000, 3.362378], [12000000, 3.701439], [14000000, 4.044943], [16000000, 4.307639], [18000000, 6.636566], [20000000, 7.073762], [22000000, 7.484568], [24000000, 7.792281], [26000000, 8.097873], [28000000, 8.435997], [30000000, 8.753197], [32000000, 9.026171], [34000000, 13.974684], [36000000, 14.477852], [38000000, 14.952249], [40000000, 15.356072]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 0.21563], [4000000, 0.450452], [6000000, 0.743916], [8000000, 0.903617], [10000000, 1.271687], [12000000, 1.487564], [14000000, 1.650209], [16000000, 1.853884], [18000000, 2.230486], [20000000, 2.441199], [22000000, 2.728875], [24000000, 2.960512], [26000000, 3.045111], [28000000, 3.383551], [30000000, 3.64437], [32000000, 3.958711], [34000000, 4.427605], [36000000, 4.829158], [38000000, 4.949264], [40000000, 5.279318]], "label": "Hopscotch_map 0.1.0 with H=62"}], "iteration-runtime": [{"data": [[2000000, 0.00434], [4000000, 0.008645], [6000000, 0.012726], [8000000, 0.017108], [10000000, 0.021293], [12000000, 0.025417], [14000000, 0.029978], [16000000, 0.034137], [18000000, 0.038348], [20000000, 0.042565], [22000000, 0.046736], [24000000, 0.050766], [26000000, 0.054858], [28000000, 0.059857], [30000000, 0.064773], [32000000, 0.068269], [34000000, 0.072399], [36000000, 0.076656], [38000000, 0.080837], [40000000, 0.084913]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 0.008715], [4000000, 0.017413], [6000000, 0.030485], [8000000, 0.034384], [10000000, 0.05633], [12000000, 0.060618], [14000000, 0.064359], [16000000, 0.068348], [18000000, 0.108395], [20000000, 0.112571], [22000000, 0.116234], [24000000, 0.120861], [26000000, 0.12488], [28000000, 0.129027], [30000000, 0.133278], [32000000, 0.137183], [34000000, 0.213691], [36000000, 0.217218], [38000000, 0.221369], [40000000, 0.225651]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 0.007199], [4000000, 0.014242], [6000000, 0.020981], [8000000, 0.028425], [10000000, 0.034233], [12000000, 0.041734], [14000000, 0.049118], [16000000, 0.056804], [18000000, 0.060329], [20000000, 0.06781], [22000000, 0.075544], [24000000, 0.082841], [26000000, 0.090417], [28000000, 0.097882], [30000000, 0.105384], [32000000, 0.113219], [34000000, 0.120396], [36000000, 0.12799], [38000000, 0.127197], [40000000, 0.134512]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 0.010753], [4000000, 0.021509], [6000000, 0.032433], [8000000, 0.043104], [10000000, 0.053872], [12000000, 0.064294], [14000000, 0.075023], [16000000, 0.085973], [18000000, 0.096376], [20000000, 0.106863], [22000000, 0.118238], [24000000, 0.12885], [26000000, 0.139381], [28000000, 0.149552], [30000000, 0.161219], [32000000, 0.171384], [34000000, 0.181911], [36000000, 0.192578], [38000000, 0.203213], [40000000, 0.214052]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.029877], [4000000, 0.059806], [6000000, 0.091288], [8000000, 0.119723], [10000000, 0.154285], [12000000, 0.183063], [14000000, 0.211343], [16000000, 0.239832], [18000000, 0.27933], [20000000, 0.308088], [22000000, 0.33691], [24000000, 0.365198], [26000000, 0.394682], [28000000, 0.422154], [30000000, 0.451759], [32000000, 0.479847], [34000000, 0.530345], [36000000, 0.558886], [38000000, 0.58922], [40000000, 0.61726]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 0.003885], [4000000, 0.007693], [6000000, 0.014706], [8000000, 0.015165], [10000000, 0.028062], [12000000, 0.028548], [14000000, 0.029042], [16000000, 0.029441], [18000000, 0.055105], [20000000, 0.055475], [22000000, 0.055872], [24000000, 0.056593], [26000000, 0.056778], [28000000, 0.057353], [30000000, 0.057682], [32000000, 0.058281], [34000000, 0.109099], [36000000, 0.110176], [38000000, 0.110039], [40000000, 0.110288]], "label": "Hopscotch_map 0.1.0 with H=62"}], "sequentialread-runtime": [{"data": [[2000000, 0.066015], [4000000, 0.132062], [6000000, 0.19808], [8000000, 0.264067], [10000000, 0.330257], [12000000, 0.396268], [14000000, 0.462148], [16000000, 0.528381], [18000000, 0.595295], [20000000, 0.661722], [22000000, 0.733221], [24000000, 0.795693], [26000000, 0.862607], [28000000, 0.930554], [30000000, 0.996481], [32000000, 1.063469], [34000000, 1.130883], [36000000, 1.197862], [38000000, 1.26444], [40000000, 1.331243]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 0.005454], [4000000, 0.010859], [6000000, 0.016294], [8000000, 0.021721], [10000000, 0.02716], [12000000, 0.032607], [14000000, 0.037966], [16000000, 0.043422], [18000000, 0.048814], [20000000, 0.054232], [22000000, 0.059655], [24000000, 0.065081], [26000000, 0.070519], [28000000, 0.076021], [30000000, 0.081406], [32000000, 0.086808], [34000000, 0.092273], [36000000, 0.097614], [38000000, 0.102959], [40000000, 0.108447]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 0.025323], [4000000, 0.050468], [6000000, 0.075719], [8000000, 0.101073], [10000000, 0.126575], [12000000, 0.151445], [14000000, 0.176767], [16000000, 0.202161], [18000000, 0.227395], [20000000, 0.252223], [22000000, 0.277559], [24000000, 0.303658], [26000000, 0.328614], [28000000, 0.353684], [30000000, 0.37902], [32000000, 0.404354], [34000000, 0.428949], [36000000, 0.455198], [38000000, 0.480269], [40000000, 0.50551]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 0.024547], [4000000, 0.049198], [6000000, 0.073507], [8000000, 0.098381], [10000000, 0.122871], [12000000, 0.14732], [14000000, 0.172477], [16000000, 0.197219], [18000000, 0.221848], [20000000, 0.246419], [22000000, 0.270951], [24000000, 0.295426], [26000000, 0.320751], [28000000, 0.345374], [30000000, 0.370235], [32000000, 0.395345], [34000000, 0.420121], [36000000, 0.444402], [38000000, 0.469488], [40000000, 0.493724]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.017941], [4000000, 0.035747], [6000000, 0.053482], [8000000, 0.0714], [10000000, 0.089282], [12000000, 0.107112], [14000000, 0.125214], [16000000, 0.142852], [18000000, 0.160906], [20000000, 0.178674], [22000000, 0.196569], [24000000, 0.214675], [26000000, 0.23231], [28000000, 0.249979], [30000000, 0.268335], [32000000, 0.285525], [34000000, 0.303568], [36000000, 0.322449], [38000000, 0.339853], [40000000, 0.357289]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 0.005641], [4000000, 0.011247], [6000000, 0.016847], [8000000, 0.022411], [10000000, 0.027978], [12000000, 0.033527], [14000000, 0.039064], [16000000, 0.044688], [18000000, 0.050287], [20000000, 0.055947], [22000000, 0.061382], [24000000, 0.067047], [26000000, 0.072661], [28000000, 0.078211], [30000000, 0.083754], [32000000, 0.089298], [34000000, 0.094921], [36000000, 0.100252], [38000000, 0.106036], [40000000, 0.111638]], "label": "Hopscotch_map 0.1.0 with H=62"}], "insertstring-runtime": [{"data": [[2000000, 11.966913], [4000000, 25.359055], [6000000, 38.226426], [8000000, 54.189022], [10000000, 66.71558], [12000000, 80.343897], [14000000, 105.835913], [16000000, 111.479143], [18000000, 122.524285], [20000000, 134.875758], [22000000, 149.275777], [24000000, 164.585156]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 1.673072], [4000000, 3.477711], [6000000, 5.962143], [8000000, 7.209779], [10000000, 11.234525], [12000000, 12.399661], [14000000, 13.46605], [16000000, 14.041126], [18000000, 21.044745], [20000000, 22.030338], [22000000, 23.269297], [24000000, 24.472337]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 1.549232], [4000000, 3.169424], [6000000, 5.147643], [8000000, 6.739272], [10000000, 9.49036], [12000000, 10.911418], [14000000, 12.543389], [16000000, 13.4431], [18000000, 17.706207], [20000000, 19.125912], [22000000, 20.614825], [24000000, 21.723872]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 1.512913], [4000000, 3.10367], [6000000, 4.91923], [8000000, 6.458509], [10000000, 8.788121], [12000000, 10.188477], [14000000, 11.698538], [16000000, 12.642797], [18000000, 15.904262], [20000000, 17.357883], [22000000, 18.790105], [24000000, 20.29802]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 1.405899], [4000000, 2.898963], [6000000, 4.683011], [8000000, 5.959444], [10000000, 8.599014], [12000000, 9.853743], [14000000, 11.111319], [16000000, 12.056017], [18000000, 16.09545], [20000000, 17.245481], [22000000, 18.580344], [24000000, 19.801106]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 2.191583], [4000000, 4.342176], [6000000, 7.325097], [8000000, 8.650634], [10000000, 9.922758], [12000000, 11.195267], [14000000, 12.364794], [16000000, 19.010532], [18000000, 20.160232], [20000000, 21.472513], [22000000, 22.729474], [24000000, 24.105325]], "label": "Hopscotch_map 0.1.0 with H=62"}], "randomread-runtime": [{"data": [[2000000, 0.139197], [4000000, 0.326714], [6000000, 0.469599], [8000000, 0.673717], [10000000, 0.900766], [12000000, 1.13317], [14000000, 1.372839], [16000000, 1.60121], [18000000, 1.859985], [20000000, 2.092974], [22000000, 2.346868], [24000000, 2.589708], [26000000, 2.836246], [28000000, 3.074232], [30000000, 3.337507], [32000000, 3.621161], [34000000, 3.915717], [36000000, 4.156395], [38000000, 4.498747], [40000000, 4.754822]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 0.038165], [4000000, 0.078807], [6000000, 0.121043], [8000000, 0.1644], [10000000, 0.206643], [12000000, 0.248778], [14000000, 0.29133], [16000000, 0.33599], [18000000, 0.379683], [20000000, 0.423126], [22000000, 0.466509], [24000000, 0.507688], [26000000, 0.550585], [28000000, 0.597446], [30000000, 0.640789], [32000000, 0.684352], [34000000, 0.730295], [36000000, 0.783637], [38000000, 0.840674], [40000000, 0.872761]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 0.139988], [4000000, 0.290487], [6000000, 0.446802], [8000000, 0.599329], [10000000, 0.759053], [12000000, 0.909156], [14000000, 1.080682], [16000000, 1.23425], [18000000, 1.415406], [20000000, 1.582457], [22000000, 1.794842], [24000000, 1.951848], [26000000, 2.182134], [28000000, 2.367808], [30000000, 2.556208], [32000000, 2.782684], [34000000, 3.009694], [36000000, 3.204924], [38000000, 3.438684], [40000000, 3.633234]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 0.163946], [4000000, 0.339514], [6000000, 0.523214], [8000000, 0.70859], [10000000, 0.881101], [12000000, 1.064021], [14000000, 1.261902], [16000000, 1.456029], [18000000, 1.711867], [20000000, 1.92088], [22000000, 2.173526], [24000000, 2.399162], [26000000, 2.621109], [28000000, 2.871504], [30000000, 3.100743], [32000000, 3.335032], [34000000, 3.58539], [36000000, 3.796788], [38000000, 4.03063], [40000000, 4.27227]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.14464], [4000000, 0.300926], [6000000, 0.535288], [8000000, 0.622326], [10000000, 0.79048], [12000000, 0.970667], [14000000, 1.136483], [16000000, 1.328473], [18000000, 1.567208], [20000000, 1.785755], [22000000, 1.977809], [24000000, 2.192254], [26000000, 2.424591], [28000000, 2.632172], [30000000, 2.83969], [32000000, 3.215737], [34000000, 3.298248], [36000000, 3.516773], [38000000, 3.711728], [40000000, 3.948517]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 0.043537], [4000000, 0.091637], [6000000, 0.137882], [8000000, 0.183668], [10000000, 0.231637], [12000000, 0.280339], [14000000, 0.327402], [16000000, 0.376276], [18000000, 0.429501], [20000000, 0.483731], [22000000, 0.534937], [24000000, 0.582843], [26000000, 0.653318], [28000000, 0.712597], [30000000, 0.780933], [32000000, 0.852991], [34000000, 0.912712], [36000000, 0.981702], [38000000, 1.07003], [40000000, 1.129227]], "label": "Hopscotch_map 0.1.0 with H=62"}], "readstring-runtime": [{"data": [[2000000, 1.196301], [4000000, 2.643158], [6000000, 4.502137], [8000000, 5.635747], [10000000, 7.707774], [12000000, 9.644039], [14000000, 10.616342], [16000000, 11.527996], [18000000, 12.893024], [20000000, 14.638498], [22000000, 16.469026], [24000000, 18.44328]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 1.015717], [4000000, 2.16517], [6000000, 3.664659], [8000000, 4.502307], [10000000, 6.152759], [12000000, 8.271646], [14000000, 12.247214], [16000000, 8.915061], [18000000, 10.530673], [20000000, 11.724606], [22000000, 12.870762], [24000000, 14.145046]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 1.124219], [4000000, 2.341998], [6000000, 3.659364], [8000000, 4.732388], [10000000, 6.253376], [12000000, 7.241137], [14000000, 9.889008], [16000000, 9.629551], [18000000, 10.756097], [20000000, 11.754887], [22000000, 13.052213], [24000000, 14.303362]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 1.088788], [4000000, 2.262857], [6000000, 3.478561], [8000000, 4.811393], [10000000, 6.199069], [12000000, 7.750062], [14000000, 13.747672], [16000000, 9.350278], [18000000, 10.273308], [20000000, 11.389629], [22000000, 12.542534], [24000000, 13.880696]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.947215], [4000000, 1.991238], [6000000, 2.902731], [8000000, 3.948767], [10000000, 4.783717], [12000000, 6.882779], [14000000, 11.797238], [16000000, 7.886857], [18000000, 8.38837], [20000000, 9.407699], [22000000, 10.426073], [24000000, 11.567341]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 1.041516], [4000000, 2.44224], [6000000, 3.645296], [8000000, 4.49597], [10000000, 6.030729], [12000000, 7.75454], [14000000, 14.000926], [16000000, 9.367327], [18000000, 10.567725], [20000000, 11.810411], [22000000, 13.070491], [24000000, 14.47235]], "label": "Hopscotch_map 0.1.0 with H=62"}], "insertstring-memory": [{"data": [[2000000, 258514944], [4000000, 505241600], [6000000, 748408832], [8000000, 999780352], [10000000, 1244839936], [12000000, 1487736832], [14000000, 1771773952], [16000000, 1991151616], [18000000, 2237022208], [20000000, 2481676288], [22000000, 2724978688], [24000000, 2967334912]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 347361280], [4000000, 683417600], [6000000, 1354719232], [8000000, 1354719232], [10000000, 2697052160], [12000000, 2697052160], [14000000, 2697052160], [16000000, 2697052160], [18000000, 5381312512], [20000000, 5381312512], [22000000, 5381312512], [24000000, 5381312512]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 316915712], [4000000, 622645248], [6000000, 946601984], [8000000, 1234644992], [10000000, 1595752448], [12000000, 1883795456], [14000000, 2171838464], [16000000, 2459881472], [18000000, 2896023552], [20000000, 3184066560], [22000000, 3472109568], [24000000, 3760152576]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 316612608], [4000000, 621432832], [6000000, 943030272], [8000000, 1231073280], [10000000, 1586225152], [12000000, 1874268160], [14000000, 2162311168], [16000000, 2450354176], [18000000, 2872614912], [20000000, 3160657920], [22000000, 3448700928], [24000000, 3736743936]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 336224256], [4000000, 641044480], [6000000, 962641920], [8000000, 1250684928], [10000000, 1605836800], [12000000, 1893879808], [14000000, 2181922816], [16000000, 2470100992], [18000000, 2892361728], [20000000, 3180404736], [22000000, 3468447744], [24000000, 3756490752]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 500432896], [4000000, 915189760], [6000000, 1686986752], [8000000, 1686986752], [10000000, 1686986752], [12000000, 1785659392], [14000000, 1945563136], [16000000, 4060377088], [18000000, 4060377088], [20000000, 4060377088], [22000000, 4060377088], [24000000, 4060377088]], "label": "Hopscotch_map 0.1.0 with H=62"}], "sequential-runtime": [{"data": [[2000000, 0.321148], [4000000, 0.614927], [6000000, 0.737743], [8000000, 1.223575], [10000000, 1.372135], [12000000, 1.523855], [14000000, 2.26019], [16000000, 2.367546], [18000000, 2.476905], [20000000, 2.586898], [22000000, 2.695808], [24000000, 2.804643], [26000000, 2.915147], [28000000, 4.468476], [30000000, 4.576737], [32000000, 4.687118], [34000000, 4.802686], [36000000, 4.91147], [38000000, 5.030708], [40000000, 5.129512]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 0.067395], [4000000, 0.133139], [6000000, 0.25282], [8000000, 0.265563], [10000000, 0.49107], [12000000, 0.502929], [14000000, 0.514658], [16000000, 0.527627], [18000000, 0.958425], [20000000, 0.973932], [22000000, 0.984401], [24000000, 0.995367], [26000000, 1.007237], [28000000, 1.020821], [30000000, 1.032527], [32000000, 1.042557], [34000000, 1.889294], [36000000, 1.897178], [38000000, 1.912698], [40000000, 1.926026]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 0.160382], [4000000, 0.3222], [6000000, 0.522046], [8000000, 0.648183], [10000000, 0.926506], [12000000, 1.044611], [14000000, 1.169607], [16000000, 1.292295], [18000000, 1.724133], [20000000, 1.85621], [22000000, 1.976107], [24000000, 2.095079], [26000000, 2.217692], [28000000, 2.341465], [30000000, 2.466638], [32000000, 2.593472], [34000000, 2.709087], [36000000, 2.838103], [38000000, 3.59036], [40000000, 3.709959]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 0.194553], [4000000, 0.385125], [6000000, 0.522261], [8000000, 0.767936], [10000000, 0.905323], [12000000, 1.042437], [14000000, 1.392445], [16000000, 1.530882], [18000000, 1.668501], [20000000, 1.805576], [22000000, 1.945004], [24000000, 2.076416], [26000000, 2.641257], [28000000, 2.776906], [30000000, 2.917034], [32000000, 3.055779], [34000000, 3.19492], [36000000, 3.3309], [38000000, 3.464305], [40000000, 3.600178]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 0.121053], [4000000, 0.235404], [6000000, 0.377176], [8000000, 0.467525], [10000000, 0.658523], [12000000, 0.749634], [14000000, 0.841801], [16000000, 0.933179], [18000000, 1.220695], [20000000, 1.309447], [22000000, 1.402169], [24000000, 1.493978], [26000000, 1.584895], [28000000, 1.67453], [30000000, 1.76897], [32000000, 1.86136], [34000000, 2.336869], [36000000, 2.425402], [38000000, 2.517212], [40000000, 2.619793]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 0.080541], [4000000, 0.158214], [6000000, 0.291079], [8000000, 0.312314], [10000000, 0.558342], [12000000, 0.579717], [14000000, 0.600873], [16000000, 0.620133], [18000000, 1.09778], [20000000, 1.112492], [22000000, 1.134224], [24000000, 1.153011], [26000000, 1.173263], [28000000, 1.19284], [30000000, 1.216606], [32000000, 1.234811], [34000000, 2.152784], [36000000, 2.178288], [38000000, 2.191015], [40000000, 2.212336]], "label": "Hopscotch_map 0.1.0 with H=62"}], "sequential-memory": [{"data": [[2000000, 47423488], [4000000, 81530880], [6000000, 114241536], [8000000, 149614592], [10000000, 182325248], [12000000, 215035904], [14000000, 253202432], [16000000, 285913088], [18000000, 318623744], [20000000, 351199232], [22000000, 383909888], [24000000, 416620544], [26000000, 449196032], [28000000, 493092864], [30000000, 525803520], [32000000, 558379008], [34000000, 591089664], [36000000, 623800320], [38000000, 656375808], [40000000, 689086464]], "label": "Google 2.0.2 sparse_hash_map"},
    {"data": [[2000000, 80535552], [4000000, 147644416], [6000000, 281862144], [8000000, 281862144], [10000000, 550297600], [12000000, 550297600], [14000000, 550297600], [16000000, 550297600], [18000000, 1087168512], [20000000, 1087168512], [22000000, 1087168512], [24000000, 1087168512], [26000000, 1087168512], [28000000, 1087168512], [30000000, 1087168512], [32000000, 1087168512], [34000000, 2160910336], [36000000, 2160910336], [38000000, 2160910336], [40000000, 2160910336]], "label": "Google 2.0.2 dense_hash_map"},
    {"data": [[2000000, 94515200], [4000000, 176136192], [6000000, 276119552], [8000000, 340054016], [10000000, 477052928], [12000000, 540987392], [14000000, 605057024], [16000000, 668991488], [18000000, 881160192], [20000000, 945094656], [22000000, 1009164288], [24000000, 1073098752], [26000000, 1137168384], [28000000, 1201102848], [30000000, 1265172480], [32000000, 1329106944], [34000000, 1393176576], [36000000, 1457111040], [38000000, 1821925376], [40000000, 1885859840]], "label": "GCC 6.1 std::unordered_map"},
    {"data": [[2000000, 134586368], [4000000, 255721472], [6000000, 351690752], [8000000, 497991680], [10000000, 593960960], [12000000, 690065408], [14000000, 886697984], [16000000, 982667264], [18000000, 1078636544], [20000000, 1174740992], [22000000, 1270710272], [24000000, 1366679552], [26000000, 1663975424], [28000000, 1759944704], [30000000, 1856049152], [32000000, 1952018432], [34000000, 2047987712], [36000000, 2143956992], [38000000, 2240061440], [40000000, 2336030720]], "label": "Boost 1.61 unordered_map"},
    {"data": [[2000000, 145731584], [4000000, 258613248], [6000000, 388136960], [8000000, 484106240], [10000000, 647184384], [12000000, 743288832], [14000000, 839258112], [16000000, 935227392], [18000000, 1165414400], [20000000, 1261518848], [22000000, 1357488128], [24000000, 1453457408], [26000000, 1549426688], [28000000, 1645395968], [30000000, 1741500416], [32000000, 1837469696], [34000000, 2201874432], [36000000, 2297843712], [38000000, 2393948160], [40000000, 2489917440]], "label": "Qt 4.8 QHash"},
    {"data": [[2000000, 63746048], [4000000, 114077696], [6000000, 214740992], [8000000, 214740992], [10000000, 416067584], [12000000, 416067584], [14000000, 416067584], [16000000, 416067584], [18000000, 818720768], [20000000, 818720768], [22000000, 818720768], [24000000, 818720768], [26000000, 818720768], [28000000, 818720768], [30000000, 818720768], [32000000, 818720768], [34000000, 1624027136], [36000000, 1624027136], [38000000, 1624027136], [40000000, 1624027136]], "label": "Hopscotch_map 0.1.0 with H=62"}]}

    function plot_chart(dataset, chart_container, choices_container, chart_settings) {
        // Set colors
        var color = 0;
        $.each(dataset, function(key, val) {
            val.color = color;
            color++;
        });
        
        // Insert checkboxes 
        $.each(dataset, function(key, val) {
            $(choices_container).append( 
                    "<li><input type='checkbox' name='" + key +"' checked='checked' id='id" + key + "'></input>" +
                    "<label for='id" + key + "'>" + val.label + "</label></li>");
        });
        
        $(choices_container).find("input").click(plot_according_to_choices);
        
        function plot_according_to_choices() {
            var data = [];
            $(choices_container).find("input:checked").each(
                function () {
                    var key = $(this).attr("name");
                    if (key && dataset[key]) {
                            data.push(dataset[key]);
                    }
                }
            );

            if (data.length > 0) {
                $.plot(chart_container, data, chart_settings);
                
    
                $(chart_container).bind("plothover", function (event, pos, item) {
                    if (item) {
                        var x = item.datapoint[0];
                        var y = item.datapoint[1].toFixed(2);

                        $("#tooltip").html(y + " ; " + x)
                                     .css({top: item.pageY+5, left: item.pageX+5})
                                     .fadeIn(200);
                    } else {
                        $("#tooltip").hide();
                    }        
                });
            }
        }

        plot_according_to_choices()
    }

    $(function () {
        plot_chart(chart_data['sequential-runtime'], '#sequential-runtime', '#sequential-runtime-choices', runtime_settings);
        plot_chart(chart_data['sequentialread-runtime'], '#sequentialread-runtime', '#sequentialread-runtime-choices', runtime_settings);
        plot_chart(chart_data['randomread-runtime'], '#randomread-runtime', '#randomread-runtime-choices', runtime_settings);
        plot_chart(chart_data['iteration-runtime'], '#iteration-runtime', '#iteration-runtime-choices', runtime_settings);
        plot_chart(chart_data['random-runtime'], '#random-runtime', '#random-runtime-choices', runtime_settings);
        plot_chart(chart_data['delete-runtime'], '#delete-runtime', '#delete-runtime-choices', runtime_settings);
        plot_chart(chart_data['sequential-memory'], '#sequential-memory', '#sequential-memory-choices', memory_settings);
        plot_chart(chart_data['insertstring-runtime'], '#insertstring-runtime', '#insertstring-runtime-choices', runtime_settings);
        plot_chart(chart_data['readstring-runtime'], '#readstring-runtime', '#readstring-runtime-choices', runtime_settings);
        plot_chart(chart_data['deletestring-runtime'], '#deletestring-runtime', '#deletestring-runtime-choices', runtime_settings);
        plot_chart(chart_data['insertstring-memory'], '#insertstring-memory', '#insertstring-memory-choices', memory_settings);
    });
    
       
    
</script>

<style>
    div.chart {
        float: left;
        width: 100%;
        height: 300px;
    }
    .choices li {
        display: block;
        float: left;
        width: 50%;
    }
    div.xaxis-title {
        width: 100%;
        text-align: center;
        font-style: italic;
        font-size: small;
        color: #666;
    }
    div.chart-after-space {
        margin-bottom: 8.0em;
    }
</style>

This benchmark is based on <http://incise.org/hash-table-benchmarks.html> with a few modifications:

* Removed glib, python and ruby hash maps
* Add the hopscotch_map hash map (which is the one we want to test in the end)
* Use std::string as key instead of const char * for the string tests
* The strings used as keys have now a minimal size of 50 instead of being simple numbers which have been stringified
* Add some read and iteration tests
* On random tests, make sure all keys appear only once during the tests
* Use std::hash<T> as hash function for all maps

The fork of the benchmark can be found on [GitHub](https://github.com/Tessil/hash-table-shootout). As well as the [raw results]({{ site.url }}/other/hopscotch_map_benchmark_raw_results.csv) of the charts.

The benchmark was compiled with GCC 6.1 and run on Linux with an Intel i5-5200u and 8Go of RAM.

<h2>Benchmark</h2>

<h3>Integers</h3>
For the integers tests, we use maps with int64_t as key and int64_t as value.

<h4>Sequential inserts: execution time (integers)</h4>
For each key k in [0, nb_entries), we insert the key-value pair (k, 1) in the map.

<div class="chart" id="sequential-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="sequential-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Random Inserts: Execution Time (integers)</h4>
Before the test, we generate a vector with the values [0, nb_entries) and shuffle this vector. 
Then for each value k in the vector, we insert the key-value pair (k, 1) in the map.

<div class="chart" id="random-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="random-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Deletes: Execution Time (integers)</h4>
Before the test, we insert nb_entries elements in the map as in the sequential insert test. We then delete each key one by one in the same order as they were inserted.

<div class="chart" id="delete-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="delete-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Sequential Reads: Execution Time (integers)</h4>
Before the test, we insert nb_entries elements in the map as in the sequential insert test. We then read each key-value pair in the same order as they were inserted.

<div class="chart" id="sequentialread-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="sequentialread-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Random Reads: Execution Time (integers)</h4>
Before the test, we insert nb_entries elements in the map as in the sequential insert test. We then read each key-value pair once in a random order.

<div class="chart" id="randomread-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="randomread-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Iteration: Execution Time (integers)</h4>
Before the test, we insert nb_entries elements in the map as in the sequential insert test. We then use the map iterators to read all the keys-values.

<div class="chart" id="iteration-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="iteration-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Memory Usage (integers)</h4>
Before the sequential insert benchmark finishes, we measure the memory that the benchmark is using.

<div class="chart" id="sequential-memory"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="sequential-memory-choices"></ul>
<div class="chart-after-space"></div>




<h3>Strings</h3>

For the string tests, we use maps with std::string as key and int64_t as value. 

When we generate a string key, we stringify the entry number, [0, nb_entries), which we append to a string containing 50 times the letter 'a'. For example, we get something like "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa35" as key for the entry 35.


<h4>Inserts: Execution Time (strings)</h4>
For each entry we generate a string as key and insert it with the value 1.

<div class="chart" id="insertstring-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="insertstring-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Deletes: Execution Time (strings)</h4>
Before the test, we insert nb_entries elements in the map as in the insert test. We then delete each key one by one in the same order as they were inserted.

<div class="chart" id="deletestring-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="deletestring-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Reads: Execution Time (strings)</h4>
Before the test, we insert nb_entries elements in the map as in the insert test. We then read each key-value pair in the same order as they were inserted.

<div class="chart" id="readstring-runtime"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="readstring-runtime-choices"></ul>
<div class="chart-after-space"></div>




<h4>Memory Usage (strings)</h4>
Before the insert benchmark finishes, we measure the memory that the benchmark is using.

<div class="chart" id="insertstring-memory"></div>
<div class="xaxis-title">number of entries in hash table</div>
<ul class="choices" id="insertstring-memory-choices"></ul>
<div class="chart-after-space"></div>

<h2>Analysis</h2>

The hopscotch_map is doing well with integers keys but not so much with string keys. The main advantages of the hopscotch_map is its cache friendliness, when searching for a key on collision we go trough the bucket array in sequential order. With strings we loose this advantage, as std::string hold pointers to a heap-allocated area. When comparing keys, we have to read this area incurring a cache-miss. If the key has pointers to other parts of the memory and we have to read them to calculate the hash, hopscotch_map may not be the best choice.

For the integer part, we can see that the hopscotch_map is able to holds its game against Google dense_hash_map. The cache-friendliness of hopscotch_map offers some advantages over the dense_hash_map when iterating trough the map. Both are performing way better than the other hash-map except for the memory usage where sparse hash obviously remains the king.

More tests should be done on hopscotch_map by varying the neighborhood size. Here 62 was used a neighborhood size.

In conclusion, if the drawbacks of hopscotch_map are not a problem for you, it may be a good alternative to other hash maps if the key used by the map doesn't use pointers to other parts of the memory to calculate its hash.










